{{ $dir := string (.Get "dir") }}
<ul class="image-gallery">
{{ range (readDir (print "/content/" $dir)) }}
  {{- $image := resources.Get (printf "%s/%s" $dir .Name) -}}
  {{- $imageurl := printf "%s/%s" $dir .Name -}}
  {{- $imagetitle := index (split .Name ".") 0 -}}
  {{ $image }}
    <li>
      <a href="{{ ($image.RelPermalink "1600x1600 q50").Permalink }}" title="{{ $imagetitle }}" class="lightbox-image">
        <img src="{{ ($image.RelPermalink "300x300 q50").Permalink }}" alt="{{ $imagetitle }}" title="{{ $imagetitle }}">
        <span>{{ $imagetitle }}</span>
      </a>
    </li>
  
{{ end }}
</ul>

{{ $dir := .Get "dir" }}
{{ $images := readDir (printf "content/%s" $dir) }}
{{- range $images }}
  {{ $image := resources.Get (printf "content/%s/%s" $dir .Name) }}
  {{ $image }}
  <div>{{ $image }}</div>
  <div>{{(printf "%s/%s" $dir .Name)}}</div>
  <img scr="{{(relURL (printf "%s/%s" $dir .Name))}}" />
  {{ if eq ($image.Ext) ".png" }}
    <div>
      <h2>{{ .Name }}</h2>
      <img src={{ $image.RelPermalink }} alt="{{ .Name }}" />
    </div>
  {{ end }}
{{- end }}

{{ $path     := .Get "path" }}
{{ $filepath := printf "assets/etc/%s" $path }}
{{ $files    := readDir $filepath }}
{{ $ext := default "-" (.Get "type" )}}
{{ if (fileExists $filepath)}}
<div class="pa2 mh4 ba">
{{- range $files }}
	{{ if (and (ne (substr .Name 0 1) "_") (not .IsDir)) }}{{ $f := resources.Get (printf "/etc/%s/%s" $path .Name)}}
		{{ $e := findRE "\\w+$" .Name }}
		{{ if (or ( eq $ext "-") (in $e $ext) )}}
			<a class="w-auto pr2" href={{$f.Permalink }} type=text/plain download>{{ .Name }}</a>
		{{end}}
	{{end}}
{{- end }}
</div>
{{end}}